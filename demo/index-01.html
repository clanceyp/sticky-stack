<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Sticky-stack demo</title>
  <meta name="description" content="Sticky-stack demo">
  <meta name="author" content="clanceyp">

  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  <style>


  .demo-block-place-holder {
      background-color: #cecece;
      border: 1px solid #ccc;
  }
  .demo-block-outline {
      border: 1px dashed #ccc;
  }
  .demo-block-min-height {
      min-height: 140px;
  }
  .side-bar .side-bar-item {
      margin-bottom: 10px;
  }

.affix {
    position: fixed;
}
.affix-top {
    position: static;
}
.affix-bottom {
    position: absolute
}

  .sticky-item-lookandfeel {
      padding: 5px;
  }
  .sticky-item-lookandfeel-1 {
      background-color: green;
  }
  .sticky-item-lookandfeel-2 {
      background-color: pink;
  }
  .sticky-item-lookandfeel-3 {
      background-color: cornflowerblue;
  }
  h1, h2, h3 {
      margin-top: 0;
      padding-top: 0;
  }
  h1 {
      background-color: #cecece;
      line-height: 4em;
      margin-top: 8px;
  }
  .foot-display {
      padding-top: 140px;
  }
  .foot-display span {
    display: inline-block;
    letter-spacing: 10px;
    margin: 0 30px 0 50px;
    position: relative;
    -webkit-transform: scale(2,20);
    -webkit-transform-origin-y: 50%;
  }
  </style>
</head>

<body>
<div class="container">
    <div class="row">
        <h1 class="text-center demo-block-outline">I'm the header (v.<span></span>)</h1>
    </div>

    <div class="row">
        <div class="col-md-2"><ul>
            <li>Navigation</li>
            <li>Navigation</li>
            <li>Navigation</li>
            <li>Navigation</li>
            <li>Navigation</li>
        </ul></div>
        <div class="col-md-6 demo-block-outline main-content">
            <h2>Main content</h2>

            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam velit augue, bibendum in fringilla quis, blandit nec odio. Proin rhoncus mollis diam, vel blandit libero blandit non. Maecenas auctor odio porttitor, egestas neque et, consectetur ipsum. Aliquam vel mattis tortor, sit amet euismod justo. Nulla ultrices dui justo, ut feugiat velit bibendum vitae. Integer quis nunc purus. Sed bibendum elit magna, ut ornare eros lacinia eu. Fusce vitae lectus at diam molestie scelerisque ut non orci. Donec diam magna, dictum nec lobortis quis, faucibus ut felis. Donec vestibulum nunc ut quam dapibus, imperdiet placerat justo tristique. Cras mollis, lectus ut ultrices feugiat, velit augue ultricies nunc, in interdum nisl tellus id est. Duis mattis at neque eu mollis. Quisque lacinia posuere massa, ac lacinia libero aliquet vel.
            </p>
            <p>
                Curabitur id massa venenatis leo vehicula ultrices at eu purus. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Aliquam gravida purus id lobortis vulputate. Nulla convallis vel turpis sit amet ultricies. Aenean ut commodo nisi, vitae malesuada nisi. Integer eget suscipit libero. Mauris sit amet dolor nibh.
            </p>
            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris elementum blandit urna sed scelerisque. Vivamus vitae odio sit amet ipsum ultricies accumsan. Aenean tempus eget enim at egestas. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Pellentesque pellentesque orci eget tellus ullamcorper commodo. Duis felis enim, lobortis et vehicula quis, tristique vel justo. Morbi a malesuada arcu. Suspendisse ac urna sit amet lectus imperdiet euismod vel vehicula lacus. Cras sed odio vitae quam posuere varius. Nam sed ipsum in lacus hendrerit pulvinar. Duis semper et lorem egestas pellentesque. Vivamus blandit non tellus quis feugiat.
            </p>
            <p>
                Curabitur fringilla est fermentum massa porttitor, pellentesque tristique velit aliquet. Donec ullamcorper nunc libero, sed condimentum turpis tincidunt at. Fusce suscipit sed urna vitae imperdiet. Vestibulum a nibh turpis. Vivamus placerat faucibus mollis. Phasellus rutrum accumsan orci eu porta. Proin a pellentesque enim. Pellentesque fringilla egestas elementum. Cras eu facilisis dui. Donec iaculis metus vel mi tincidunt egestas. Mauris quis sapien sit amet lacus egestas molestie non hendrerit turpis. Fusce ac dui diam. Proin consequat lacus sem, id consequat orci porta sed. In quis tempus turpis, vitae ullamcorper erat.
            </p>
            <p>
                Curabitur dapibus rutrum sapien, in elementum purus interdum sit amet. Aenean placerat tincidunt risus at vestibulum. Suspendisse potenti. Etiam euismod orci ac lacus tempus, non consectetur dolor pulvinar. Donec pellentesque eget augue in iaculis. Suspendisse commodo nunc vel mauris iaculis, sit amet cursus felis hendrerit. Duis in imperdiet ipsum. Donec molestie accumsan fermentum. Cras commodo erat mauris, et porta sapien fringilla id. Vivamus ac metus in dui malesuada mollis. Nam tincidunt risus et rutrum pulvinar. Sed scelerisque nec quam a bibendum. Pellentesque quis nunc vestibulum, dapibus lacus in, tristique turpis. Praesent felis libero, sagittis sed facilisis pulvinar, egestas sed dolor. Nunc tellus arcu, facilisis a justo id, dapibus volutpat quam.
            </p>

        </div>
        <aside class="col-md-4 js-sticky-stack side-bar">
            <div class="side-bar-item demo-block-outline demo-block-min-height ">
                <div class="">
                    <h3>Asside item <span class="no"></span></h3>
                    <p>Hi, i'm not sticky i'm just normal : )</p>
                </div>
            </div>
            <div class="side-bar-item demo-block-outline demo-block-min-height js-sticky-stack-item-container">
                <div class="js-sticky-stack-item sticky-item-lookandfeel">
                    <h3>Asside item <span class="no"></span></h3>
                    <p>Hi, I'm sticky boom!</p>
                    <p>Hi, I'm sticky boom!</p>
                    <p>Hi, I'm sticky boom!</p>
                </div>
            </div>
            <div class="side-bar-item demo-block-outline demo-block-min-height">
                <div class="">
                    <h3>Asside item <span class="no"></span></h3>
                    <p>Hi, i'm not sticky i'm just normal : )</p>
                </div>
            </div>
            <div class="side-bar-item demo-block-outline demo-block-min-height js-sticky-stack-item-container">
                <div class="js-sticky-stack-item sticky-item-lookandfeel">
                    <h3>Asside item <span class="no"></span></h3>
                    <p>Hi, I'm sticky boom!</p>
                    <p>Hi, I'm sticky boom!</p>
                    <p>Hi, I'm sticky boom!</p>
                </div>
            </div>
            <div class="side-bar-item demo-block-outline demo-block-min-height ">
                <div class="">
                    <h3>Asside item <span class="no"></span></h3>
                    <p>Hi, i'm not sticky i'm just normal : )</p>
                </div>
            </div>
            <div class="side-bar-item demo-block-outline demo-block-min-height js-sticky-stack-item-container">
                <div class="js-sticky-stack-item sticky-item-lookandfeel">
                    <h3>Asside item <span class="no"></span></h3>
                    <p>Hi, I'm sticky boom!</p>
                    <p>Hi, I'm sticky boom!</p>
                    <p>Hi, I'm sticky boom!</p>
                </div>
            </div>
        </aside>
    </div>

    <div class="row footer">
      <div class="col-md-12 demo-block-place-holder text-center foot-display" style="min-height:1300px;">I'm a <span>tall</span> footer</div>
    </div>
</div>

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.js"></script>
<script>


$(document).ready(function(){
    var version = location.pathname.split("index-")[1].split(".")[0];
    $("h2 span").html( version )
    $("aside span.no").each(function(i, el){
        $(el).html(i+1);
    });
    $(".main-content").append( $(".main-content").html() );
    var $$stacks = $(".js-sticky-stack"),
        offset = 0,
        gap = 10;

    $$stacks.each(function(i, stack){
        var $stack = $(stack),
            $$elements = $stack.find(".js-sticky-stack-item");

        $$elements.each(function(i, el){
            var $el = $(el),
                ii = (i+1),
                $parent = $el.parent(".js-sticky-stack-item-container");

            $el.addClass("sticky-item-lookandfeel-"+ ii);
            $el.data("sticky-stack-top", gap*ii + offset )
                .css({
                    'width': $parent.width(),
                    'top': $el.data("sticky-stack-top"),
                    'z-index': 100+ii
                })
                .affix({
                    offset: {
                        top: function() {
                            var a = (this.top = $el.offset().top - ($el.data("sticky-stack-top")));
                            return a;
                        },
                        bottom: function() {
                            var a = (this.bottom = $('.footer').outerHeight(true) + gap*2 );
                            return a;
                        }
                    }
                });
            $parent.css({
                'min-height': $el.outerHeight(true)
            });
            offset = offset+$el.outerHeight(true);
            $el.on('affixed.bs.affix', function(){
                if (!$(this).css('top') || $(this).css('top') === 'auto'){
                    $(this).css('top', $(this).data("sticky-stack-top"));
                }
            });
        });
    });
});

</script>
</body>
</html>
